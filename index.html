<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#000000" />
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icons/icon-180.png" />
  <title>Calculadora de Hora Extra</title>
  <style>
    :root {
      --bg-color: #121212;
      --text-color: #ffffff;
      --card-bg: #1e1e1e;
      --input-bg: #2c2c2c;
      --border-radius: 12px;
      --btn-bg: #007bff;
      --muted: rgba(255,255,255,.7);
      --tab-bg: #1a1a1a;
      --tab-active: #2b2b2b;
      --tab-border: #333;
    }

    body {
      margin: 0;
      padding: calc(env(safe-area-inset-top, 0px) + 16px) 16px 16px;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
    }

    .container { width: 100%; max-width: 420px; }

    h1 {
      text-align: center;
      font-size: 1.5rem;
      margin: 0 0 16px;
    }

    /* Tabs */
    .tabs {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      background: var(--tab-bg);
      padding: 6px;
      border-radius: 12px;
      border: 1px solid var(--tab-border);
      margin-bottom: 20px;
    }
    .tab-btn {
      appearance: none;
      border: none;
      background: transparent;
      color: var(--text-color);
      padding: 10px 12px;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      opacity: .85;
    }
    .tab-btn.active {
      background: var(--tab-active);
      opacity: 1;
    }

    label {
      display: block;
      margin-top: 14px;
      font-weight: bold;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 4px;
      border-radius: var(--border-radius);
      border: none;
      background-color: var(--input-bg);
      color: var(--text-color);
      box-sizing: border-box;
    }

    /* Select visual igual ao input */
    select {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      padding-right: 2.5rem;
      background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='20' viewBox='0 0 24 24' width='20' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
      background-repeat: no-repeat;
      background-position: right 0.75rem center;
      background-size: 1rem;
    }

    button.action {
      width: 100%;
      margin-top: 16px;
      padding: 12px;
      background-color: var(--btn-bg);
      color: white;
      font-weight: bold;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
    }

    .resultado {
      margin-top: 24px;
      padding: 16px;
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      display: none;
    }
    .resultado p { margin: 8px 0; }
    .hint { font-size: 12px; color: var(--muted); margin: 6px 0 0; }

    .fade { animation: fadeIn 0.4s ease-in-out; }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.98); }
      to   { opacity: 1; transform: scale(1); }
    }

    /* Se√ß√µes (abas) */
    .section { display: none; }
    .section.active { display: block; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Calculadora de Hora Extra</h1>

    <!-- Abas -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="hora-extra">Hora Extra</button>
      <button class="tab-btn" data-tab="ferias">F√©rias</button>
    </div>

    <!-- Se√ß√£o: Hora Extra -->
    <section id="hora-extra" class="section active">
      <label for="salario">üí∞ Sal√°rio Bruto (R$):</label>
      <input type="number" id="salario" placeholder="Informe seu sal√°rio bruto mensal.">

      <label for="horas">‚è∞ Horas Extras Trabalhadas:</label>
      <input type="number" id="horas" placeholder="Total de horas extras no m√™s.">

      <label for="percentual">üìà Porcentagem da Hora Extra:</label>
      <select id="percentual">
        <option value="0.5">50%</option>
        <option value="0.6" selected>60%</option>
        <option value="0.7">70%</option>
        <option value="0.8">80%</option>
        <option value="0.9">90%</option>
        <option value="1.0">100%</option>
        <option value="2.0">200%</option>
      </select>

      <label for="carga">‚öôÔ∏è Carga Hor√°ria Mensal (horas):</label>
      <input type="number" id="carga" placeholder="Geralmente 156h, 160h ou 220h mensais.">

      <button class="action" onclick="calcular()">Calcular</button>
      <button class="action" onclick="exemplo()">Preencher com exemplo</button>

      <div class="resultado" id="resultado"></div>
    </section>

    <!-- Se√ß√£o: F√©rias -->
    <section id="ferias" class="section">
      <label for="diasGozo">üìÜ Dias que vai tirar (20‚Äì30):</label>
      <input type="number" id="diasGozo" min="20" max="30" value="30" />

      <label for="diasVender">üõí Dias a vender (0‚Äì10):</label>
      <select id="diasVender"></select>
      <p id="hintVenda" class="hint">Voc√™ pode vender at√© 10 dia(s).</p>

      <button class="action" onclick="calcularFerias()">Calcular F√©rias</button>
      <div class="resultado" id="resultadoFerias"></div>
    </section>
  </div>

  <script>
    /* ============ Tabs ============ */
    const tabButtons = document.querySelectorAll('.tab-btn');
    const sections = document.querySelectorAll('.section');

    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const tab = btn.getAttribute('data-tab');

        tabButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        sections.forEach(sec => {
          sec.classList.toggle('active', sec.id === tab);
        });
      });
    });

    /* ============ Hora Extra ============ */
    function calcular() {
      const salario = parseFloat(document.getElementById('salario').value);
      const horas = parseFloat(document.getElementById('horas').value);
      const percentual = parseFloat(document.getElementById('percentual').value);
      const carga = parseFloat(document.getElementById('carga').value);
      const resultado = document.getElementById('resultado');

      if (isNaN(salario) || isNaN(horas) || isNaN(percentual) || isNaN(carga) || carga === 0) {
        resultado.innerHTML = "<p>‚ö†Ô∏è Preencha todos os campos corretamente.</p>";
        resultado.style.display = "block";
        resultado.classList.add("fade");
        return;
      }

      const valorHora = salario / carga;
      const valorExtra = valorHora * (1 + percentual);
      const totalExtras = valorExtra * horas;

      resultado.innerHTML = `
        <p>üíµ Valor da hora: R$ ${valorHora.toFixed(2)}</p>
        <p>‚ûï Hora extra (${(percentual * 100).toFixed(0)}%): R$ ${valorExtra.toFixed(2)}</p>
        <p>üßæ Total das horas extras: R$ ${totalExtras.toFixed(2)}</p>
      `;
      resultado.style.display = "block";
      resultado.classList.remove("fade");
      void resultado.offsetWidth; // reflow para reiniciar anima√ß√£o
      resultado.classList.add("fade");

      localStorage.setItem("dados", JSON.stringify({ salario, horas, percentual, carga }));
    }

    function exemplo() {
      document.getElementById('salario').value = 3000;
      document.getElementById('horas').value = 10;
      document.getElementById('percentual').value = 0.6;
      document.getElementById('carga').value = 160;
    }

    /* ============ F√©rias (limite e c√°lculo) ============ */
    function inicializarFerias() {
      const TOTAL_FERIAS = 30;
      const MAX_VENDA_LEGAL = 10;

      const gozoEl   = document.getElementById('diasGozo');
      const venderEl = document.getElementById('diasVender');
      const hintEl   = document.getElementById('hintVenda');

      function numero(n) {
        const v = Number(n);
        return Number.isFinite(v) ? v : 0;
      }

      function limiteMaximoVendavel() {
        const gozo = numero(gozoEl.value);
        const sobra = Math.max(0, TOTAL_FERIAS - gozo);
        return Math.min(MAX_VENDA_LEGAL, sobra);
      }

      function preencherSelectVender(maxVendavel) {
        venderEl.innerHTML = '';
        for (let i = 0; i <= maxVendavel; i++) {
          const opt = document.createElement('option');
          opt.value = String(i);
          opt.textContent = String(i);
          venderEl.appendChild(opt);
        }
      }

      function atualizarLimiteVenda() {
        const maxVendavel = limiteMaximoVendavel();
        preencherSelectVender(maxVendavel);
        if (hintEl) hintEl.textContent = `Voc√™ pode vender at√© ${maxVendavel} dia(s).`;
      }

      gozoEl.addEventListener('input', atualizarLimiteVenda);
      gozoEl.addEventListener('change', atualizarLimiteVenda);
      atualizarLimiteVenda();
    }

    function calcularFerias() {
      const salario = parseFloat(document.getElementById('salario').value);
      const diasGozo = parseFloat(document.getElementById('diasGozo').value);
      const diasVender = parseFloat(document.getElementById('diasVender').value);
      const res = document.getElementById('resultadoFerias');

      if (isNaN(salario) || isNaN(diasGozo) || isNaN(diasVender) || diasGozo < 20 || diasGozo > 30) {
        res.innerHTML = "<p>‚ö†Ô∏è Informe sal√°rio e dias de f√©rias corretamente.</p>";
        res.style.display = "block";
        res.classList.add("fade");
        return;
      }

      // C√°lculo aproximado:
      // - Remunera√ß√£o dos dias de gozo + 1/3
      // - Abono pecuni√°rio dos dias vendidos + 1/3
      const valorDia = salario / 30;
      const remunGozo = valorDia * diasGozo;
      const adicionalGozo = remunGozo / 3;

      const abono = valorDia * diasVender;
      const adicionalAbono = abono / 3;

      const totalReceber = remunGozo + adicionalGozo + abono + adicionalAbono;

      res.innerHTML = `
        <p>üìÖ Dias de gozo: ${diasGozo}</p>
        <p>üíµ Valor por dia: R$ ${valorDia.toFixed(2)}</p>
        <p>üéØ Remunera√ß√£o gozo: R$ ${remunGozo.toFixed(2)} (+ 1/3 = R$ ${adicionalGozo.toFixed(2)})</p>
        <p>üí∏ Abono (dias vendidos ${diasVender}): R$ ${abono.toFixed(2)} (+ 1/3 = R$ ${adicionalAbono.toFixed(2)})</p>
        <p><strong>üßæ Total a receber (aprox.): R$ ${totalReceber.toFixed(2)}</strong></p>
      `;
      res.style.display = "block";
      res.classList.remove("fade");
      void res.offsetWidth;
      res.classList.add("fade");
    }

    /* ============ Onload ============ */
    window.onload = function () {
      // Restaura dados de hora extra
      const dados = JSON.parse(localStorage.getItem("dados"));
      if (dados) {
        document.getElementById('salario').value = dados.salario ?? '';
        document.getElementById('horas').value = dados.horas ?? '';
        document.getElementById('percentual').value = dados.percentual ?? '0.6';
        document.getElementById('carga').value = dados.carga ?? '';
      }
      // Inicializa l√≥gica das f√©rias
      inicializarFerias();
    };
  </script>
</body>
</html>
